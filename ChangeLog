2010-01-11  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	Clean-up the Xmega erase functions.
	* jtagmkII_private.h: Add CMND_XMEGA_ERASE as well as
	the various XMEGA_ERASE_* definitions (from updated
	appnote AVR067)
	* jtagmkII.c (jtagmkII_chip_erase): Correctly implement
	Xmega chip erase based on CMND_XMEGA_ERASE.
	* jtagmkII.c (jtagmkII_pre_write): Remove, this turned out
	to be just a chip erase.
	* jtagmkII.c (jtagmkII_program_disable): Don't try reading
	"hfuse" for Xmega parts; they don't have it.
	* main.c (main): Re-enable auto-erase.  It's been done
	before (as "jtagmkII_pre_write") in jtagmkII_paged_write()
	anyway.  Xmega boot and application flash areas should be
	handled separately in the future, so auto_erase can only
	affect the area just being programmed.

2010-01-11  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* main.c (main): disable safemode for Xmega parts.

2010-01-12  Michal Ludvig  <mludvig@logix.net.nz>

	* buspirate.c: If the BusPirate doesn't respond
	to a standard a reset command assume it was in binmode
	and attempt to exit to text mode first.

2010-01-08  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* bitbang.c: Fix Win32 build error: move freq up to the file
	level.
	* buspirate.c: Fix Win32 build warning: include <malloc.h> to
	to get a declaration for alloca().

2010-01-08  Thomas Fischl <tfischl@gmx.de>

	bug #28520: Programming with USBasp with low clock speed fails
	* usbasp.c: Change blocksize depending on sck frequency to
	avoid usb transmition timeouts.

2010-01-08  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	bug #27505: serbb_posix does not cope with inverted pins
	* serbb_posix (serbb_highpulsepin): apply PIN_MASK when
	checking pin numbers.
	* serbb_win32 (serbb_highpulsepin): (Dito.)

2010-01-08  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	bug #28516: Linux/Dragon: Error message on exit
	* stk500v2.c: Fix the "bad response to GO command:
	RSP_ILLEGAL_EMULATOR_MODE" message.  jtagmkII_close()
	has been called with the wrong pgm->cookie.  Wrap it
	inside stk500v2_jtagmkII_close(), adjusting the cookie
	data appropriately.

2010-01-08  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	Submitted by Doug:
	patch #7010: Win32 enhanced bitbang_delay
	* bitbang.c (bitbang_calibrate_delay, bitbang_delay): On Win32,
	use the high-resolution performance counter rather than the
	uneducated delay loop guess if it is available on the target
	hardware.

2010-01-08  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	Submitted by Gerard:
	patch #6828: Using arbitrary BAUD rates
	* ser_posix.c (serial_baud_lookup): Allow non-standard baud
	rates.
	* ser_win32.c (serial_baud_lookup): (Dito.)

2010-01-07  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	Submitted by Eric Trein:
	bug #27596: AT90s2333 is not correctly supported in avrdude.conf
	* avrdude.conf.in (at90s2333): add various STK500v2 parameters.

2010-01-07  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	Submitted by Gyorgy Szekely:
	bug #28458: Buffer line is incorrectly released for PP programmers
	* par.c (par_close): use par_setmany() rather than par_setpin()
	for PPI_AVR_BUFF.

2010-01-07  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	Submitted by Lukasz Goralczyk:
	bug #27507: SIGSEGV when using avrdragon (avrdude 5.8)
	* stk500v2.c (stk500v2_dragon_isp_initpgm): Use
	stk500v2_jtagmkII_setup/stk500v2_jtagmkII_rather than their
	jtagII counterparts, to get the private data properly
	initialized.

2010-01-07  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* buspirate.c: Cosmetics: remove UTF-8 dashes, adjust for 8-column
	hard tabs.

2010-01-07  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* buspirate.c: add $ Id $ line.
	* buspirate.h: add $ Id $ line.

2010-01-07  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	Fix a few warnings that came up recently (some of them only triggered
	by recent GCC versions).
	* config_gram.y (parse_cmdbits): "brkt possibly used uninitialized"
	(GCC errs here)
	* jtagmkII.c (jtagmkII_reset32): "status possibly used uninitialized"
	(I think GCC errs, too)
	* buspirate.c: "pointers differ in signedness" (mismatch between
	string processing and the use of "unsigned char" throughought the
	AVRDUDE API)

2010-01-01  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* jtagmkII.c (jtagmkII_smc_init32): replace sleep() by usleep() for
	win32 compatibility.
