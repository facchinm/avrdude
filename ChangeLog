2007-03-25 Colin O'Flynn <coflynn@newae.com>

	* stk500generic.c: Forgot to close the serial port before trying to
          open it again, caused problems on Windows machines.
    Closes bug #19411

2007-02-26 Joerg Wunsch <j@uriah.heep.sax.de>

	* avrdude.conf.in: Add the AT90PWM2/3B devices.

2007-02-02 Thomas Fischl <tfischl@gmx.de>
	* usbasp.c: Changed return value of function usbasp_initialize to stop
        avrdude on communication errors between programmer and target.
	Closes bug #18581: safemode destroys fuse bits

2007-02-01 Joerg Wunsch <j@uriah.heep.sax.de>

	* config_gram.y: Remove duplicate definition of token K_WRITEPAGE

2007-01-30 Joerg Wunsch <j@uriah.heep.sax.de>

	* butterfly.c: Implement ATmega256x support for butterfly/avr109.

2007-01-30 Joerg Wunsch <j@uriah.heep.sax.de>

	* configure.ac: Fix subdir handling.  Now finally, "make distcheck" will
	include the documentation into the tarball even if the configure had been
	run without the --enable-doc.

2007-01-30 Joerg Wunsch <j@uriah.heep.sax.de>

	* safemode.c: Obtain progname from avrdude.h rather than trying to roll our
	own (duplicate) copy of it.
	* avr910.c: Constify char pointers.
	* avrpart.c: (Ditto.)
	* avrpart.h: (Ditto.)
	* butterfly.c: (Ditto.)
	* config.c: (Ditto.)
	* config.h: (Ditto.)
	* jtagmkI.c: (Ditto.)
	* jtagmkII.c: (Ditto.)
	* par.c: (Ditto.)
	* pgm.c: (Ditto.)
	* pgm.h: (Ditto.)
	* serbb_posix.c: (Ditto.)
	* serbb_win32.c: (Ditto.)
	* stk500.c: (Ditto.)
	* stk500v2.c: (Ditto.)
	* usbasp.c: (Ditto.)

2007-01-29 Joerg Wunsch <j@uriah.heep.sax.de>

	* avrpart.c: More backend/library abstraction and generalization:
	turn the list_parts() and list_programmers() functions into
	general list iteration functions that call a caller-supplied
	callback for each element.  Implement list_parts() and
	list_programmers() as private functions in main.c based on that
	approach.
	* avrpart.h: (Ditto.)
	* main.c: (Ditto.)
	* pgm.c: (Ditto.)
	* pgm.h: (Ditto.)

2007-01-25 Joerg Wunsch <j@uriah.heep.sax.de>

	* Makefile.am: Rearrange everything so it is now built into a
	libavrdude.a library, and link main.c against that library.
	* configure.ac: Add AC_PROG_RANLIB as we are building a library
	now.

2007-01-24 Joerg Wunsch <j@uriah.heep.sax.de>

	Major code cleanup.
	- Make all internal functions "static".
	- Make sure each module's header and implementation file match.
	- Remove all library-like functionality from main.c, so only
	  the actual frontend remains in main.c.
	- Add C++ brackets to all header files.
	* avr.c: (Ditto.)
	* avr.h: (Ditto.)
	* avr910.c: (Ditto.)
	* avr910.h: (Ditto.)
	* avrdude.h: (Ditto.)
	* avrpart.c: (Ditto.)
	* avrpart.h: (Ditto.)
	* bitbang.h: (Ditto.)
	* butterfly.h: (Ditto.)
	* config.c: (Ditto.)
	* config.h: (Ditto.)
	* confwin.h: (Ditto.)
	* crc16.c: (Ditto.)
	* crc16.h: (Ditto.)
	* fileio.c: (Ditto.)
	* fileio.h: (Ditto.)
	* jtagmkI.h: (Ditto.)
	* jtagmkII.h: (Ditto.)
	* lexer.l: (Ditto.)
	* lists.h: (Ditto.)
	* main.c: (Ditto.)
	* par.h: (Ditto.)
	* pgm.c: (Ditto.)
	* pgm.h: (Ditto.)
	* ppi.c: (Ditto.)
	* ppi.h: (Ditto.)
	* safemode.h: (Ditto.)
	* serbb.h: (Ditto.)
	* serial.h: (Ditto.)
	* stk500.h: (Ditto.)
	* stk500v2.c: (Ditto.)
	* stk500v2.h: (Ditto.)
	* term.c: (Ditto.)
	* term.h: (Ditto.)
	* usbasp.h: (Ditto.)
	* update.c: New file.
	* update.h: New file.
	* Makefile.am: Include update.c and update.h.

2007-01-24 Joerg Wunsch <j@uriah.heep.sax.de>

	Move all "extern" declarations into a centreal header file.
	* Makefile.am: Add new avrdude.h.
	* avrdude.h: New file.
	* avr.c: Replace private extern decl's by #include "avrdude.h".
	* avr910.c: (Ditto.)
	* avrpart.c: (Ditto.)
	* bitbang.c: (Ditto.)
	* butterfly.c: (Ditto.)
	* config.c: (Ditto.)
	* config_gram.y: (Ditto.)
	* fileio.c: (Ditto.)
	* jtagmkI.c: (Ditto.)
	* jtagmkII.c: (Ditto.)
	* lexer.l: (Ditto.)
	* main.c: (Ditto.)
	* par.c: (Ditto.)
	* pgm.c: (Ditto.)
	* ppi.c: (Ditto.)
	* ppiwin.c: (Ditto.)
	* ser_avrdoper.c: (Ditto.)
	* ser_posix.c: (Ditto.)
	* ser_win32.c: (Ditto.)
	* serbb_posix.c: (Ditto.)
	* serbb_win32.c: (Ditto.)
	* stk500.c: (Ditto.)
	* stk500generic.c: (Ditto.)
	* stk500v2.c: (Ditto.)
	* term.c: (Ditto.)
	* usb_libusb.c: (Ditto.)
	* usbasp.c: (Ditto.)

2007-01-13 Joerg Wunsch <j@uriah.heep.sax.de>

	* avrdude.conf.in (ATmega8): Bump the delay values for flash
	and EEPROM, based on the current Atmel XML file.

2007-01-12 Joerg Wunsch <j@uriah.heep.sax.de>

	* configure.ac: Improve the detection of the Win32 HID library,
	and the presence of the header ddk/hidsdi.h.  It now works
	correctly under Cygwin and several flavours of MinGW.
	* Makefile.am: Add new LIBHID pattern.

2007-01-11 Joerg Wunsch <j@uriah.heep.sax.de>

	* butterfly.c (butterfly_initialize): when sending the 'T'
	command (which is ignored by current AVR109 bootloaders),
	send the first reply from the list of supported device
	codes back rather than using avrdude.conf's idea about
	an AVR910 device code.  Apparently, this solves disagreements
	between different versions of at least the ATmega8 AVR910
	device code.
	Closes bug #18727: Writing flash failed

2007-01-07 Joerg Wunsch <j@uriah.heep.sax.de>

	Reported by Till Harbaum:
	* avrdude.conf.in (ATtiny25/45/85): Change HVSP reset from
	500 microseconds to 1 ms, matching the most recent Atmel XML
	specs.
