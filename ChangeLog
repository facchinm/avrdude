2005-09-16  Joerg Wunsch <j@uriah.heep.sax.de>

	* avrdude.1: document the memtypes for -U
	* doc/avrdude.texi: (Ditto.)
	Closes bug #13501: <memtype> should be listed in the man page

2005-09-16  Joerg Wunsch <j@uriah.heep.sax.de>

	* doc/Makefile.am: add logic to detect the misf^H^H^H^H
	gratitous API change in recent versions of texi2html where
	the output directory has changed names.
	Fix for:
	bug #13026: The build fails with texi2html 1.76
	bug #12715: make issues during install
	patch #3091: commandline fix for latest version of texi2html

2005-09-16  Joerg Wunsch <j@uriah.heep.sax.de>

	* usb_libusb.c (usbdev_drain): actually implement draining to aid
	synchronizing against a JTAG ICE in weird state.

2005-09-16  Joerg Wunsch <j@uriah.heep.sax.de>

	* butterfly.c: improve the butterfly initialization so it is more likely
	to synchonize; [bug #9787: avrdude 4.4.0 correct butterfly interface]

2005-09-14  Joerg Wunsch <j@uriah.heep.sax.de>

	* jtagmkII.c (jtagmkII_paged_load): return the number of bytes read.
	This makes EEPROM block reads work again.

2005-09-14  Joerg Wunsch <j@uriah.heep.sax.de>

	* avrdude.conf.in: add a jtag2slow programmer alias, and make
	"jtag2" default to 115200 Bd.
	* doc/avrdude.texi: document the above changes.

2005-08-30  Joerg Wunsch <j@uriah.heep.sax.de>

	* usb_libusb.c: Consistently use unsigned char for buffers.

2005-08-29  Brian S. Dean  <bsd@bsdhome.com>

	* avr910.c: Eliminate compiler warnings.  GCC 4.x elicits many
	signedness warnings when passing unsigned char * when char * is in
	the prototype and vice versa.  Clean these up along with a few
	others.
	* butterfly.c: (Ditto.)
	* jtagmkII.c: (Ditto.)
	* safemode.c: (Ditto.)
	* safemode.h: (Ditto.)
	* ser_posix.c: (Ditto.)
	* serial.h: (Ditto.)
	* stk500.c: (Ditto.)
	* stk500v2.c: (Ditto.)

2005-08-28  Joerg Wunsch <j@uriah.heep.sax.de>

	* avrdude.conf.in: Add support for the ATtiny25/45/85.  Note that
	only the ATtiny45 appears to have a complete XML description right
	now.
	* avrdude.1: Mention all the recently added device support: AT90PWM2/3,
	ATmega164/324/644, ATmega329x/649x, ATtiny25/45/85.
	* doc/avrdude.texi: (Ditto.)

2005-08-17  Joerg Wunsch <j@uriah.heep.sax.de>

	* avrdude.conf.in: fix the EEPROM size for ATmega329x/649x.

2005-08-16  Joerg Wunsch <j@uriah.heep.sax.de>

	* avrdude.conf.in: Add support for the AT90PWM2/3.

2005-07-27  Joerg Wunsch <j@uriah.heep.sax.de>

	(This work has been done as part of a contract with Atmel, Dresden.)
	* butterfly.c: Implement full support for AVR109 boot loaders.
	* avrdude.conf.in: add avr109 and avr911 as alias for butterfly.
	* avrdude.1: Document the AVR109 addition.
	* doc/avrdude.texi: (Ditto.)

2005-07-26  Brian S. Dean  <bsd@bsdhome.com>

	* main.c:
	  Don't call exit() directly here - set the exit value and jump to the
	  main_exit: label to ensure the programmer is released correctly.

	* stk500v2.c:
	  The stk500v2_getsync() function was improperly checking for success,
	  thus it was falsely reporting that it failed when it was actually
	  working correctly.  Fixed.

2005-07-25  Joerg Wunsch <j@uriah.heep.sax.de>

	* usb_libusb.c: Catch benign errors when reading the serial #.

2005-06-19  Joerg Wunsch <j@uriah.heep.sax.de>

	* Makefile.am: Implement libusb-base USB transport for the
	JTAG ICE mkII.
	* configure.ac: ditto.
	* jtagmkII.c: ditto.
	* ser_posix.c: ditto.
	* ser_win32.c: ditto.
	* serial.h: ditto.
	* usb_libusb.c: ditto (New file).
	* avrdude.1: document the USB transport.
	* doc/avrdude.texi: ditto.

2005-06-15  Joerg Wunsch <j@uriah.heep.sax.de>

	* avrdude.conf.in: The AT90CAN128 has AllowFullPageBitstream = no.

2005-06-14  Joerg Wunsch <j@uriah.heep.sax.de>

	* avrdude.conf.in: Add support for the ATmega164/324/644.
	* jtagmkII.c: If enter_progmode fails with RSP_ILLEGAL_JTAG_ID, give
	the user a hint that the JTAGEN fuse might be unset.

2005-06-11  Joerg Wunsch <j@uriah.heep.sax.de>

	* avrdude.conf.in: Add support for the ATmega329x/649x.

2005-05-27  Joerg Wunsch <j@uriah.heep.sax.de>

	* jtagmkII.c: fix a signedness bug when shifting bits; when
	discarding a packet for being overly long, restart the state
	machine instead of attempting to drop a preposterous amount
	of data.

2005-05-19  Joerg Wunsch <j@uriah.heep.sax.de>

	* avrdude.1:
	* doc/avrdude.texi: Document that the JTAG ICE mkII code currently
	cannot write to flash one byte at a time.  Also mention the bug
	tracker interface on savannah.

2005/05/14  Brian S. Dean  <bsd@bsdhome.com>

	* configure.ac:
	* main.c:
	  Update version for beta release and copyright message.
	  Change the default port to 'serial' for the newly added serial
	  programmers stk500v2 and jtagmkii.

2005-05-10  Joerg Wunsch <j@uriah.heep.sax.de>

	* Makefile.am:
	* avr910.c:
	* avrdude.1:
	* avrdude.conf.in:
	* avrpart.c:
	* avrpart.h:
	* butterfly.c:
	* config_gram.y:
	* crc16.c:
	* crc16.h:
	* jtagmkII.c:
	* jtagmkII.h:
	* jtagmkII_private.h:
	* lexer.l:
	* main.c:
	* pgm.h:
	* serial.h:
	* ser_posix.c:
	* ser_win32.c:
	* stk500.c:
	* stk500v2.c:
	* stk500v2.h:
	* stk500v2_private.h:
	* doc/avrdude.texi:

	Mega-commit to bring in both, the STK500v2 support from Erik
	Walthinsen, as well as JTAG ICE mkII support (by me).

	Note that for the JTAG ICE, I did change a few things in the
	internal API.  Notably I made the serial receive timeout
	configurable by the backends via an exported variable (done in
	both the Posix and the Win32 implementation), and I made the
	serial_recv() function return a -1 instead of bailing out with
	exit(1) upon encountering a receive timeout (currently only done
	in the Posix implementation).  Both measures together allow me to
	receive a datastreem from the ICE at 115 kbps on a somewhat lossy
	PCI multi-UART card that occasionally drops a character.  The JTAG
	ICE mkII protocol has enough of safety layers to allow recovering
	from these events, but the previous code wasn't prepared for any
	kind of recovery.  The Win32 change for this still has to be done.

2005/02/11  Brian S. Dean  <bsd@bsdhome.com>

	* main.c:
	  Exit non-zero if safe-mode reverts fuse bits that were requested on
	  the command-line.

	  Variable declarations must only appear at the beginning of a block.

2005/02/10  Brian S. Dean  <bsd@bsdhome.com>

	* avrdude.1:
	  Document -u option to disable safe mode.

2005/02/10  Brian S. Dean  <bsd@bsdhome.com>

	* configure.ac:
	  doc/Makefile is now dependent on whether or not doc is enabled.

2005/02/10  Brian S. Dean  <bsd@bsdhome.com>

	* Makefile.am:
	* configure.ac:
	  Disable the doc build by default; the tools needed to build
	  doc are either not available on all systems or are at best
	  inconvenient to build and install.  The doc can still be built, one
	  just needs to specify --enable-doc at configure time.
	

2005-01-24  Colin O'Flynn  <coflynn@newae.com>

	* main.c: Add "safe mode". Fuse settings will be restored at the end
	of a programming session unless the -u switch is specified.
	* safemode.c: New file. Safe mode support.
	* safemode.h: New file. Safe mode support.
	* Makefile.am: Add new files.
	* doc/avrdude.texi: Document new Safe Mode feature and switch.

2004/12/22  Brian S. Dean  <bsd@bsdhome.com>

	* avrdude.conf.in:
	  Add support for "Xilinx JTAG cable". Contributed by:
	  Tymm <tymm@booyaka.com>

	  Add support for the AT90CAN128.  Not sure if all the instruction
	  encoding is correct, specifically the address bits don't exactly match
	  those of the preliminary datasheet that I have, but I don't see how
	  they could be right.  Tested with STK500 and it works there.
	  Instruction encodings have not been tested due to lack of a parallel
	  port on my Mac development box.

2004-07-19  Theodore A. Roth  <troth@openavr.org>

	* avrdude.1: Remove reference to ppi programmer schematic.
	* configure.ac (AC_INIT): Set version to "4.4.0cvs".

2004-07-18  Theodore A. Roth  <troth@openavr.org>

	* AVRDUDE 4.4.0 has been released (cvs release tag is "release_4_4_0").

2004-07-18  Theodore A. Roth  <troth@openavr.org>

	* Makefile.am (EXTRA_DIST): Remove avrdude.pdf since it is no longer
	supplied.
	* NEWS: Fix typo.
	* bootstrap: Delete the autom4te.cache dir before running the
	autotools.
	* configure.ac (AC_INIT): Set version to 4.4.0.

2004-07-17  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* avrdude.1: Fixed obvious copy and paste error
	(Patch #3199 contributed by Galen Seitz)

2004-07-15  Theodore A. Roth  <troth@openavr.org>

	* main.c (main): Don't indent CPP directives.
	When showing update progress in a no tty situation, use unbuffered IO
	for all systems, not just win32 native.
	Update copyright year when printing version.
	Remove warning about native win32 being experimental.
	Split a line string.
	* ppiwin.c: Update copyright year.
	Add cvs Id keyword.
	(usleep): Cleanup debug CPP directives to improve readability.
	* ser_win32.c: Include <stdio.h> to fix failing build.

2004-07-08  Theodore A. Roth  <troth@openavr.org>

	* AUTHORS: Add names of recent major contributors.
	* ser_win32.c: Assign copyright to Martin J. Thomas since he did all
	real work on this file.

2004-07-07  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* NEWS, doc/TODO: Updated NEWS and TODO

2004-07-07  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* stk500.c, term.c, doc/avrdude.texi, avrdude.1:
	added "sck"-command to the terminal mode.
	This command allows slowing down of the SCK of
	STK500-programmers.

2004-07-05  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* *.c, *.h: Removed unnecessary includes of
	config.h

2004-07-04  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* avr.h: Removed some unused prototypes

2004-07-04  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* stk500.c: Fixed fosc behaviour for values exceeding
	maximum frequency (contributed by Galen Seitz)

2004-07-04  Jan-Hinnerk Reichert  <hinni@despammed.com>
	* avrdude.conf.in: Added support for
	ATtiny2313 (contributed by Bob Paddock)

2004-06-25  Joerg Wunsch <j@uriah.heep.sax.de>

	* avrdude.conf.in: Fix efuse bits for ATmega169.

2004-06-24  Alex Shepherd <maillists@ajsystems.co.nz>

	Merged in Win32 Native changes contributed by Martin Thomas
	Changed all instances of __CYGWIN__ conditional compilation to
	WIN32NATIVE

	* ser_win32.c: fleshed out all the previous stubs
	* ser_posix.c: added WIN32NATIVE conditional compilation to skip
	all function to allow ser_win32.c functions to operate
	* ppi.h: removed commented code
	* pgh.h: added usleep macros
	* main.c: stdout,stderr tweaks for Win32
	* configure.ac: added CFLAGS and LDFLAGS for Win32Native
	* config_gram.y: added strtok_r macro
	* buterfly.c: added various stub functions and EXIT processing
	* avr910.c: added return 0 to avr910_open() and included time headers
	* term.c: added warning about libreadline not supported in WIN32NATIVE

2004-06-17  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* avrdude.conf.in: Added support for
	  - tiny13 (contributed by Pawel Moll)
	  - mega48 and mega88 (contributed by Galen Seitz)
	However, the STK500-code for mega8 remains unchanged.

2004-05-19  Brian S. Dean  <bsd@bsdhome.com>

	* main.c:
	* stk500.c: Allow the baud rate to be specified on the command
	line with a new -b switch.  The specified baud rate will
	override the default serial port baud rate for a particular
	programmer.

2004-05-19  Brian S. Dean  <bsd@bsdhome.com>

	* ppi.c: Stub-out the ppi_* functions in ppi.c with empty
	wrappers that simply return an error code in order to build
	successfully on MacOS X.  This allows avrdude to work on MacOS
	X and was tested using a USB<->RS232 cable adapter,
	specifically Keyspan model USA-19HS.

2004-04-23  Joerg Wunsch <j@uriah.heep.sax.de>

	* lists.h, lists.c: Drop LISTSZ and the check for
	it in lcreat().

2004-04-17  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* avr910.c: Hopefully fixed that weird "first byte not
	programmed"-error in a good way (previous fix was not
	working with all firmwares)

2004-02-10  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* avrdude.1, doc/avrdude.texi, doc/TODO:
	Removed the deprecated options from documentation

2004-02-10  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* main.c: Removed deprecated options.

2004-01-28  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* pgm.c, main.c, avr910.c, butterfly.c, stk500.c:
	Changed default for powerup, powerdown and LED-commands
	to do nothing and return OK. Then removed these commands
	from avr910, butterfly and stk500.
	* pgm.c: Fixed wrong type for default_open introduced by
	the cleanup yesterday.

2004-01-29  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* par.c: changed order of port-read/writes in par_txrx().
	This change should increase immunity to delays in the
	programmer-hardware.
	Also did some unrelated cleanup in par_txrx().

2004-01-28  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* pgm.[ch], main.c, par.c, avr910.c, butterfly.c, stk500.c:
	Move save/restore-functionality into open/close.
	* par.c: open/close now saves/restores PPICTRL, too.
	* TODO: exitspecs don't work if RESET is in PPICTRL.

2004-01-26  Theodore A. Roth  <troth@openavr.org>

	* configure.ac (AC_INIT): Post release version update.

2004-01-26  Theodore A. Roth  <troth@openavr.org>

	* AVRDUDE 4.3.0 has been released (cvs release tag is "release_4_3_0").

2004-01-26  Theodore A. Roth  <troth@openavr.org>

	* configure.ac: Update copyright year.
	(AC_INIT): Set version to 4.3.0.

2004-01-25  Theodore A. Roth  <troth@openavr.org>

	* ChangeLog: Minor formatting cleanups.
	Move to all 2003 entries to ChangeLog-2003.
	* ChangeLog-2003: New file.
	* Makefile.am: Update copyright year.
	(EXTRA_DIST): Add ChangeLog-2003.

2004-01-17  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* doc/avrdude.texi: Get rid of those black boxes marking "overfull
	hbox".

2004-01-17  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* doc/avrdude.texi: New appendix "Troubleshooting".

2004-01-12  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* avr910.c, avrpart.c, avrpart.h, doc/TODO:
	Look up devicecode and report device.

2004-01-03  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* avr910.c, pgm.c, pgm.h, config_gram.y, lexer.l: Add new configuration
	parameter baudrate to support avr910-programmers with non-standard
	baudrates.
	* avrdude.conf.in, doc/avrdude.texi: Added "baudrate" to documentation.

2004-01-03  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* avr910.c: Removed debugging stuff that is no longer needed.

2004-01-03  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* doc/TODO: Removed two items.

2004-01-03  Jan-Hinnerk Reichert  <hinni@despammed.com>

	* main.c, avr.c, avr.h, par.c, stk500.c: Add function
	avr_chip_erase() to unify handling of cycle-count.
	Makes cycle-count work for avr910-programmers.

